
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>USJ 門票開賣計算器</title>
  <script>
    function calculateSaleDate() {
  const input = document.getElementById('dateInput').value.trim();
  const result = document.getElementById('result');
  result.style.color = '#007BFF';

  if (!/^[0-9]{4}$/.test(input)) {
    result.innerText = '請輸入4位數字（例如0822）';
    result.style.color = 'red';
    return;
  }

  const month = parseInt(input.substring(0, 2), 10);
  const day = parseInt(input.substring(2, 4), 10);

  // 檢查月日是否合法
  const year = new Date().getFullYear();
  const testDate = new Date(year, month - 1, day);
  if (
    testDate.getMonth() + 1 !== month ||
    testDate.getDate() !== day
  ) {
    result.innerText = '輸入的日期不存在，請確認月份與天數';
    result.style.color = 'red';
    return;
  }

  // 若入園日比今天早，則預設為明年
  const visitDate = new Date(year, month - 1, day);
  const today = new Date();
  if (visitDate < today) {
    visitDate.setFullYear(year + 1);
  }

  visitDate.setDate(visitDate.getDate() - 93);
  const saleDate = visitDate.toLocaleDateString('zh-TW', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit'
  });

  result.innerText = `開賣時間：${saleDate} 23:00（台灣時間）`;
  result.style.color = '#007BFF';
}
</body>
</html>
